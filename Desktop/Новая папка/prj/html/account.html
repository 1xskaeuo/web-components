<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–π –ê–∫–∫–∞—É–Ω—Ç - Vila Eysk</title>
    
    <!-- Styles -->
    <link rel="stylesheet" href="/css/account.css">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
</head>
<body>
    
    <!-- Header -->
    <header class="account-header">
        <div class="header-content">
            <!-- ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å -->
            <a href="/" class="back-btn">
                <i class="fas fa-arrow-left"></i>
                <span>–ù–∞ –≥–ª–∞–≤–Ω—É—é</span>
            </a>
            <h1>
                <i class="fas fa-user-circle"></i>
                –ú–æ–π –ê–∫–∫–∞—É–Ω—Ç
            </h1>
            <button class="logout-btn" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i>
                <span>–í—ã–π—Ç–∏</span>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="account-container">
        
        <!-- Left Sidebar - Profile Section -->
        <aside class="profile-section">
            
            <!-- Profile Card -->
            <div class="profile-card">
                <div class="profile-avatar">
                    <img 
                        src="https://ui-avatars.com/api/?name=User&background=C9A961&color=fff&size=200" 
                        alt="Avatar" 
                        id="userAvatar"
                    >
                    <button class="edit-avatar" title="–ò–∑–º–µ–Ω–∏—Ç—å —Ñ–æ—Ç–æ">
                        <i class="fas fa-camera"></i>
                    </button>
                </div>
                
                <div class="profile-info">
                    <h2 id="userName">
                        <i class="fas fa-spinner fa-spin"></i>
                        –ó–∞–≥—Ä—É–∑–∫–∞...
                    </h2>
                    <p id="userEmail">
                        <i class="fas fa-envelope"></i>
                        loading@example.com
                    </p>
                    <p class="member-since">
                        <i class="fas fa-calendar-alt"></i>
                        –£—á–∞—Å—Ç–Ω–∏–∫ —Å <span id="memberSince">...</span>
                    </p>
                </div>
                
                <button class="edit-profile-btn" onclick="openEditProfile()">
                    <i class="fas fa-user-edit"></i>
                    –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                </button>
            </div>

            <!-- Loyalty Program Card -->
            <div class="loyalty-card">
                <div class="loyalty-header">
                    <div>
                        <h3>
                            <i class="fas fa-trophy"></i>
                            –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
                        </h3>
                        <p class="loyalty-status" id="loyaltyStatus">
                            –°—Ç–∞—Ç—É—Å: –ì–æ—Å—Ç—å
                        </p>
                    </div>
                    <div class="loyalty-badge" id="loyaltyBadge">
                        <i class="fas fa-user"></i>
                    </div>
                </div>

                <div class="loyalty-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="loyaltyProgress" style="width: 0%"></div>
                    </div>
                    <p class="progress-text">
                        <i class="fas fa-chart-line"></i>
                        <span id="currentVisits">0</span> –∏–∑ 
                        <span id="nextLevelVisits">5</span> –ø–æ—Å–µ—â–µ–Ω–∏–π –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
                    </p>
                </div>

                <div class="loyalty-benefits">
                    <div class="benefit-item">
                        <i class="fas fa-tag"></i>
                        <div>
                            <strong>–¢–µ–∫—É—â–∞—è —Å–∫–∏–¥–∫–∞</strong>
                            <p id="currentDiscount">0%</p>
                        </div>
                    </div>
                    <div class="benefit-item">
                        <i class="fas fa-gift"></i>
                        <div>
                            <strong>–ë–æ–Ω—É—Å—ã</strong>
                            <p id="bonusPoints">0 –±–∞–ª–ª–æ–≤</p>
                        </div>
                    </div>
                </div>

                <div class="loyalty-levels">
                    <h4>
                        <i class="fas fa-layer-group"></i>
                        –£—Ä–æ–≤–Ω–∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏:
                    </h4>
                    <div class="level-list">
                        <div class="level-item" data-level="guest">
                            <i class="fas fa-user"></i>
                            <div>
                                <strong>–ì–æ—Å—Ç—å</strong>
                                <span>0 –ø–æ—Å–µ—â–µ–Ω–∏–π ‚Ä¢ 0% —Å–∫–∏–¥–∫–∞</span>
                            </div>
                        </div>
                        <div class="level-item" data-level="bronze">
                            <i class="fas fa-medal"></i>
                            <div>
                                <strong>–ë—Ä–æ–Ω–∑–æ–≤—ã–π</strong>
                                <span>5 –ø–æ—Å–µ—â–µ–Ω–∏–π ‚Ä¢ 5% —Å–∫–∏–¥–∫–∞</span>
                            </div>
                        </div>
                        <div class="level-item" data-level="silver">
                            <i class="fas fa-award"></i>
                            <div>
                                <strong>–°–µ—Ä–µ–±—Ä—è–Ω—ã–π</strong>
                                <span>10 –ø–æ—Å–µ—â–µ–Ω–∏–π ‚Ä¢ 10% —Å–∫–∏–¥–∫–∞</span>
                            </div>
                        </div>
                        <div class="level-item" data-level="gold">
                            <i class="fas fa-star"></i>
                            <div>
                                <strong>–ó–æ–ª–æ—Ç–æ–π</strong>
                                <span>20 –ø–æ—Å–µ—â–µ–Ω–∏–π ‚Ä¢ 15% —Å–∫–∏–¥–∫–∞</span>
                            </div>
                        </div>
                        <div class="level-item" data-level="platinum">
                            <i class="fas fa-crown"></i>
                            <div>
                                <strong>–ü–ª–∞—Ç–∏–Ω–æ–≤—ã–π</strong>
                                <span>50 –ø–æ—Å–µ—â–µ–Ω–∏–π ‚Ä¢ 25% —Å–∫–∏–¥–∫–∞</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        </aside>

        <!-- Right Content - Stats & Bookings -->
        <section class="content-section">
            
            <!-- Statistics Grid -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-hotel"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalStays">0</h3>
                        <p>–í—Å–µ–≥–æ –≤–∏–∑–∏—Ç–æ–≤</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-moon"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalNights">0</h3>
                        <p>–ù–æ—á–µ–π</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-ruble-sign"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalSpent">0 ‚ÇΩ</h3>
                        <p>–ü–æ—Ç—Ä–∞—á–µ–Ω–æ</p>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon">
                        <i class="fas fa-piggy-bank"></i>
                    </div>
                    <div class="stat-info">
                        <h3 id="totalSaved">0 ‚ÇΩ</h3>
                        <p>–°—ç–∫–æ–Ω–æ–º–ª–µ–Ω–æ</p>
                    </div>
                </div>
            </div>

            <!-- Bookings History Section -->
            <div class="bookings-section">
                <div class="section-header">
                    <h2>
                        <i class="fas fa-calendar-check"></i>
                        –ò—Å—Ç–æ—Ä–∏—è –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π
                    </h2>
                    <div class="filter-tabs">
                        <button class="filter-tab active" data-filter="all">
                            <i class="fas fa-list"></i>
                            –í—Å–µ
                        </button>
                        <button class="filter-tab" data-filter="confirmed">
                            <i class="fas fa-check-circle"></i>
                            –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ
                        </button>
                        <button class="filter-tab" data-filter="completed">
                            <i class="fas fa-check-double"></i>
                            –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ
                        </button>
                        <button class="filter-tab" data-filter="cancelled">
                            <i class="fas fa-times-circle"></i>
                            –û—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ
                        </button>
                    </div>
                </div>

                <div class="bookings-list" id="bookingsList">
                    <!-- –ó–∞–≥—Ä—É–∑–∫–∞... -->
                    <div class="loading-state">
                        <i class="fas fa-spinner fa-spin fa-3x"></i>
                        <p>–ó–∞–≥—Ä—É–∑–∫–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π...</p>
                    </div>
                </div>

                <button class="load-more-btn" id="loadMoreBookings" style="display: none;">
                    <i class="fas fa-plus-circle"></i>
                    –ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ
                </button>
            </div>

            <!-- Favorite Rooms Section -->
            <div class="favorites-section">
                <h2>
                    <i class="fas fa-heart"></i>
                    –ò–∑–±—Ä–∞–Ω–Ω—ã–µ –Ω–æ–º–µ—Ä–∞
                </h2>
                <div class="favorites-grid" id="favoriteRooms">
                    <!-- Favorite rooms will be inserted here -->
                    <div class="loading-state">
                        <i class="fas fa-spinner fa-spin fa-2x"></i>
                        <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
                    </div>
                </div>
            </div>
            
        </section>
        
    </main>

    <!-- Edit Profile Modal -->
    <div class="modal" id="editProfileModal" style="display: none;">
        <div class="modal-overlay" onclick="closeEditProfile()"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2>
                    <i class="fas fa-user-edit"></i>
                    –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                </h2>
                <button class="close-modal" onclick="closeEditProfile()" type="button">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <form id="editProfileForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="editFirstName">
                            <i class="fas fa-user"></i>
                            –ò–º—è
                        </label>
                        <input 
                            type="text" 
                            id="editFirstName" 
                            name="firstName"
                            placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è"
                            required
                        >
                    </div>
                    <div class="form-group">
                        <label for="editLastName">
                            <i class="fas fa-user"></i>
                            –§–∞–º–∏–ª–∏—è
                        </label>
                        <input 
                            type="text" 
                            id="editLastName" 
                            name="lastName"
                            placeholder="–í–≤–µ–¥–∏—Ç–µ —Ñ–∞–º–∏–ª–∏—é"
                            required
                        >
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="editEmail">
                        <i class="fas fa-envelope"></i>
                        Email
                    </label>
                    <input 
                        type="email" 
                        id="editEmail" 
                        name="email"
                        placeholder="example@email.com"
                        required
                    >
                </div>
                
                <div class="form-group">
                    <label for="editPhone">
                        <i class="fas fa-phone"></i>
                        –¢–µ–ª–µ—Ñ–æ–Ω
                    </label>
                    <input 
                        type="tel" 
                        id="editPhone" 
                        name="phone"
                        placeholder="+7 (___) ___-__-__"
                        required
                    >
                </div>
                
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeEditProfile()">
                        <i class="fas fa-times"></i>
                        –û—Ç–º–µ–Ω–∞
                    </button>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save"></i>
                        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer class="account-footer">
        <div class="footer-content">
            <p>&copy; 2025 Vila Eysk. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
            <div class="footer-links">
                <!-- ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏ -->
                <a href="/privacy">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
                <a href="/terms">–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</a>
                <a href="/contact">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</a>
            </div>
        </div>
    </footer>

    <!-- Notification Container -->
    <div id="notificationContainer"></div>

    <!-- Firebase Check Script -->
    <script>
        console.log('üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ Firebase:', {
            firebase: typeof firebase !== 'undefined',
            app: typeof firebase !== 'undefined' && typeof firebase.app !== 'undefined',
            auth: typeof firebase !== 'undefined' && typeof firebase.auth !== 'undefined',
            database: typeof firebase !== 'undefined' && typeof firebase.database !== 'undefined'
        });

        if (typeof firebase === 'undefined') {
            console.error('‚ùå –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê: Firebase –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω!');
            document.body.innerHTML = `
                <div style="
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                    height: 100vh;
                    text-align: center;
                    padding: 20px;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    font-family: Arial, sans-serif;
                ">
                    <i class="fas fa-exclamation-triangle" style="font-size: 64px; margin-bottom: 20px;"></i>
                    <h1>–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏</h1>
                    <p>Firebase SDK –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É.</p>
                    <button onclick="location.reload()" style="
                        margin-top: 20px;
                        padding: 15px 30px;
                        background: white;
                        color: #667eea;
                        border: none;
                        border-radius: 25px;
                        font-size: 16px;
                        font-weight: bold;
                        cursor: pointer;
                    ">
                        <i class="fas fa-sync-alt"></i> –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
                    </button>
                </div>
            `;
        } else {
            console.log('‚úÖ Firebase SDK –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ');
        }
    </script>

    <!-- Account Script - ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å -->
    <script src="/js/account.js"></script>

</body>
</html>